openapi: 3.0.0
info:
  title: Educate Global Hub API
  description: API documentation for the Educate Global Hub platform
  version: 1.0.0
  contact:
    name: API Support
    email: support@educateglobalhub.com

servers:
  - url: http://localhost:5000/api
    description: Development server
  - url: https://api.educateglobalhub.com/api
    description: Production server

security:
  - bearerAuth: []

paths:
  /v1/auth/login:
    post:
      tags:
        - Authentication
      summary: User login
      description: Authenticate user with email and password to get access and refresh tokens
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  description: User's email address
                  example: "user@example.com"
                password:
                  type: string
                  description: User's password
                  example: "password123"
                rememberMe:
                  type: boolean
                  description: Whether to remember the user for extended session
                  default: false
                  example: false
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Login successful"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: "#/components/schemas/User"
                      accessToken:
                        type: string
                        description: JWT access token
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                      refreshToken:
                        type: string
                        description: JWT refresh token
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        "400":
          description: Bad request - validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid credentials or email not verified
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/create-resource:
    post:
      tags:
        - Resources
      summary: Create a new resource
      description: Create a new educational resource with files and metadata
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - description
                - resourceType
                - ageRange
                - curriculum
                - curriculumType
                - subject
                - banner
                - previews
                - files
              properties:
                title:
                  type: string
                  description: Title of the resource
                  example: "Advanced Mathematics Worksheets"
                description:
                  type: string
                  description: Detailed description of the resource
                  example: "Comprehensive worksheets covering algebra, geometry, and calculus"
                resourceType:
                  type: string
                  enum:
                    [
                      worksheet,
                      lesson_plan,
                      assessment,
                      activity,
                      presentation,
                      other,
                    ]
                  description: Type of educational resource
                  example: "worksheet"
                visibility:
                  type: string
                  enum: [public, private]
                  description: Visibility setting for the resource
                  example: "public"
                isFree:
                  type: boolean
                  description: Whether the resource is free or paid
                  example: true
                price:
                  type: number
                  description: Price of the resource (required if not free)
                  example: 9.99
                currency:
                  type: string
                  description: Currency code (required if not free)
                  example: "USD"
                saveAsDraft:
                  type: boolean
                  description: Whether to save as draft or submit for approval
                  example: false
                ageRange:
                  type: string
                  description: Target age range for the resource
                  example: "6-8 years"
                curriculum:
                  type: string
                  description: Curriculum framework
                  example: "Common Core"
                curriculumType:
                  type: string
                  description: Type of curriculum
                  example: "Mathematics"
                subject:
                  type: string
                  description: Subject area
                  example: "Mathematics"
                banner:
                  type: string
                  format: binary
                  description: Cover photo for the resource (required)
                previews:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Preview images (1-5 images)
                files:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Main resource files (1-3 files)
      responses:
        "201":
          description: Resource created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "resource created successfully"
                  data:
                    $ref: "#/components/schemas/Resource"
        "400":
          description: Bad request - missing required fields or validation errors
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/update-resource/{id}:
    put:
      tags:
        - Resources
      summary: Update an existing resource
      description: Update resource details, files, and metadata
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Resource ID
          example: "64a1b2c3d4e5f6789abcdef0"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Updated title
                  example: "Updated Mathematics Worksheets"
                description:
                  type: string
                  description: Updated description
                type:
                  type: string
                  enum:
                    [
                      worksheet,
                      lesson_plan,
                      assessment,
                      activity,
                      presentation,
                      other,
                    ]
                  description: Updated resource type
                publishing:
                  type: string
                  enum: [public, private]
                  description: Updated visibility setting
                isFree:
                  type: boolean
                  description: Updated free/paid status
                price:
                  type: number
                  description: Updated price
                currency:
                  type: string
                  description: Updated currency
                ageRange:
                  type: string
                  description: Updated age range
                curriculum:
                  type: string
                  description: Updated curriculum
                curriculumType:
                  type: string
                  description: Updated curriculum type
                subject:
                  type: string
                  description: Updated subject
                status:
                  type: string
                  enum: [draft, pending, approved, rejected]
                  description: Status (admin only)
                coverPhoto:
                  type: string
                  format: binary
                  description: New cover photo
                previewImages:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Additional preview images
                mainFile:
                  type: string
                  format: binary
                  description: New main resource file
      responses:
        "200":
          description: Resource updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "resource updated successfully"
                  data:
                    type: object
                    properties:
                      resource:
                        $ref: "#/components/schemas/Resource"
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - not authorized to update this resource
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/update-status/{resourceId}:
    patch:
      tags:
        - Resources
      summary: Update resource status
      description: Update the approval status of a resource (admin) or submit for approval (user)
      security:
        - bearerAuth: []
      parameters:
        - name: resourceId
          in: path
          required: true
          schema:
            type: string
          description: Resource ID
          example: "64a1b2c3d4e5f6789abcdef0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [draft, pending, approved, rejected]
                  description: New status for the resource
                  example: "approved"
      responses:
        "200":
          description: Resource status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Resource status updated successfully"
                  data:
                    type: object
                    properties:
                      resource:
                        $ref: "#/components/schemas/Resource"
        "400":
          description: Bad request - invalid status value
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - not authorized to update status
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/my-resource-page:
    get:
      tags:
        - Resources
      summary: Get user's resources
      description: Get all resources created by the authenticated user with stats
      security:
        - bearerAuth: []
      parameters:
        - name: search
          in: query
          schema:
            type: string
          description: Search term for resource titles
          example: "mathematics"
        - name: status
          in: query
          schema:
            type: string
            enum: [all, draft, pending, approved, rejected]
          description: Filter by resource status
          example: "approved"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of resources per page
          example: 10
      responses:
        "200":
          description: Resources fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Resource status updated successfully"
                  data:
                    type: object
                    properties:
                      stats:
                        $ref: "#/components/schemas/ResourceStats"
                      resources:
                        type: array
                        items:
                          $ref: "#/components/schemas/Resource"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/delete-resource/{resourceId}:
    delete:
      tags:
        - Resources
      summary: Delete a resource
      description: Soft delete a resource (only owner or admin can delete)
      security:
        - bearerAuth: []
      parameters:
        - name: resourceId
          in: path
          required: true
          schema:
            type: string
          description: Resource ID to delete
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Resource deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Resource deleted successfully"
                  data:
                    type: object
                    nullable: true
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - not authorized to delete this resource
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/search-resource:
    get:
      tags:
        - Resources
      summary: Search resources (public)
      description: Search for resources by title, description, curriculum, subject, or age range
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: Search query
          example: "mathematics worksheets"
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of results to return
          example: 10
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
      responses:
        "200":
          description: Resources found successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Resources fetched successfully"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Resource"
        "400":
          description: Bad request - search query is required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/get-all-resources:
    get:
      tags:
        - Resources
      summary: Get all approved resources (public)
      description: Get all approved resources for the main page with filtering and pagination
      parameters:
        - name: q
          in: query
          schema:
            type: string
          description: Search query for title or description
          example: "mathematics"
        - name: subject
          in: query
          schema:
            type: string
          description: Filter by subject
          example: "Mathematics"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of resources per page
          example: 10
      responses:
        "200":
          description: Resources fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "All resources fetched"
                  data:
                    type: object
                    properties:
                      resources:
                        type: array
                        items:
                          $ref: "#/components/schemas/FormattedResource"
                      pagination:
                        $ref: "#/components/schemas/Pagination"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/resources/get-resource-by-id/{id}:
    get:
      tags:
        - Resources
      summary: Get resource by ID
      description: Get detailed information about a specific resource
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Resource ID
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Resource fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Resource fetched successfully!"
                  data:
                    $ref: "#/components/schemas/DetailedResource"
        "403":
          description: Resource not available (draft/pending for non-authenticated users)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Resource not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/admin-dashboard/dashboard:
    get:
      tags:
        - Admin Dashboard
      summary: Get admin dashboard data
      description: Get comprehensive dashboard statistics and recent activities for admin users
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Dashboard data retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Admin dashboard data retrieved"
                  data:
                    type: object
                    properties:
                      stats:
                        $ref: "#/components/schemas/AdminDashboardStats"
                      recentActivities:
                        type: array
                        items:
                          $ref: "#/components/schemas/RecentActivity"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/admin-dashboard/admin-resources:
    get:
      tags:
        - Admin Dashboard
      summary: Get all resources for admin management
      description: Get all resources with filtering and pagination for admin management
      security:
        - bearerAuth: []
      parameters:
        - name: q
          in: query
          schema:
            type: string
          description: Search query for title or description
          example: "mathematics"
        - name: status
          in: query
          schema:
            type: string
            enum: [all, draft, pending, approved, rejected]
          description: Filter by resource status
          example: "pending"
        - name: subject
          in: query
          schema:
            type: string
          description: Filter by subject
          example: "Mathematics"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of resources per page
          example: 10
      responses:
        "200":
          description: Resources fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "All resources Fetched succesfully"
                  data:
                    type: object
                    properties:
                      resources:
                        type: array
                        items:
                          $ref: "#/components/schemas/FormattedResource"
                      pagination:
                        $ref: "#/components/schemas/Pagination"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/admin-dashboard/admin-resources/stats:
    get:
      tags:
        - Admin Dashboard
      summary: Get resource statistics for admin
      description: Get comprehensive resource statistics including totals, pending approvals, and sales
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Resource statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Stats Fetched succesfully"
                  data:
                    $ref: "#/components/schemas/AdminResourceStats"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/adminForum/stats:
    get:
      tags:
        - Admin Forum
      summary: Get forum statistics
      description: Get comprehensive forum statistics including total discussions, active discussions, reported posts, pinned posts, and total replies
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Forum statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Forum stats retrieved successfully"
                  data:
                    type: object
                    properties:
                      totalDiscussions:
                        type: integer
                        example: 150
                      active:
                        type: integer
                        example: 142
                      reported:
                        type: integer
                        example: 3
                      pinned:
                        type: integer
                        example: 5
                      totalReplies:
                        type: integer
                        example: 450
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/adminForum/list:
    get:
      tags:
        - Admin Forum
      summary: Get discussions for admin management
      description: Get all discussions with filtering and sorting options for admin management
      security:
        - bearerAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [active, reported, pinned]
          description: Filter by discussion status
          example: "active"
        - name: category
          in: query
          schema:
            type: string
          description: Filter by discussion category
          example: "Teaching Tips & Strategies"
        - name: sortBy
          in: query
          schema:
            type: string
            enum: [recent, trending]
            default: recent
          description: Sort discussions by criteria
          example: "recent"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of discussions per page
          example: 10
      responses:
        "200":
          description: Discussions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Admin discussions retrieved successfully"
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Discussion"
                      total:
                        type: integer
                        example: 50
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/adminForum/{id}/pin:
    patch:
      tags:
        - Admin Forum
      summary: Toggle pin status of a discussion
      description: Pin or unpin a discussion (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Pin status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion pinned successfully"
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "Discussion pinned successfully"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/adminForum/{id}/lock:
    patch:
      tags:
        - Admin Forum
      summary: Toggle lock status of a discussion
      description: Lock or unlock a discussion (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Lock status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion locked successfully"
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "Discussion locked successfully"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/adminForum/{id}:
    delete:
      tags:
        - Admin Forum
      summary: Delete a discussion
      description: Soft delete a discussion (admin only)
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID to delete
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Discussion deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion deleted successfully"
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "Discussion deleted successfully"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - admin role required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/create-discussion:
    post:
      tags:
        - Discussion
      summary: Create a new discussion
      description: Create a new discussion post in the forum
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - category
              properties:
                title:
                  type: string
                  description: Discussion title
                  example: "Best practices for online teaching"
                content:
                  type: string
                  description: Discussion content/body
                  example: "I would like to share some effective strategies for engaging students in online classes..."
                category:
                  type: string
                  enum:
                    - "Teaching Tips & Strategies"
                    - "Curriculum & Resources"
                    - "Career Advice"
                    - "Help & Support"
                  description: Discussion category
                  example: "Teaching Tips & Strategies"
                tags:
                  type: array
                  items:
                    type: string
                  description: Tags for the discussion
                  example: ["online-teaching", "engagement", "strategies"]
      responses:
        "201":
          description: Discussion created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion created successfully"
                  data:
                    $ref: "#/components/schemas/Discussion"
        "400":
          description: Bad request - missing required fields or invalid category
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/{id}/like:
    post:
      tags:
        - Discussion
      summary: Like or unlike a discussion
      description: Toggle like status for a discussion
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Like status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Like status updated!"
                  data:
                    type: object
                    properties:
                      discussionId:
                        type: string
                        example: "64a1b2c3d4e5f6789abcdef0"
                      likeCount:
                        type: integer
                        example: 15
                      liked:
                        type: boolean
                        example: true
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/{id}/report:
    post:
      tags:
        - Discussion
      summary: Report a discussion
      description: Report a discussion for inappropriate content
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - reason
              properties:
                reason:
                  type: string
                  description: Reason for reporting the discussion
                  example: "Inappropriate content"
      responses:
        "200":
          description: Discussion reported successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion reported successfully"
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: "Discussion reported successfully"
        "400":
          description: Bad request - report reason is required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/get-all-discussions:
    get:
      tags:
        - Discussion
      summary: Get all discussions
      description: Get all discussions (for admin/debug purposes)
      responses:
        "200":
          description: All discussions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "All discussions retrieved successfully"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Discussion"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/get-specific-discussion/{id}:
    get:
      tags:
        - Discussion
      summary: Get a specific discussion
      description: Get a specific discussion with replies and pagination
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for replies pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of replies per page
          example: 10
      responses:
        "200":
          description: Discussion retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion retrieved successfully"
                  data:
                    type: object
                    properties:
                      discussion:
                        $ref: "#/components/schemas/Discussion"
                      replies:
                        type: array
                        items:
                          $ref: "#/components/schemas/Reply"
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 10
                          totalReplies:
                            type: integer
                            example: 25
                          totalPages:
                            type: integer
                            example: 3
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/feed:
    get:
      tags:
        - Discussion
      summary: Get discussion feed
      description: Get discussion feed with tabs (trending, recent, unanswered)
      parameters:
        - name: tab
          in: query
          schema:
            type: string
            enum: [recent, trending, unanswered]
            default: recent
          description: Feed tab type
          example: "recent"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of discussions per page
          example: 10
        - name: category
          in: query
          schema:
            type: string
          description: Filter by category
          example: "Teaching Tips & Strategies"
        - name: tag
          in: query
          schema:
            type: string
          description: Filter by tag
          example: "online-teaching"
      responses:
        "200":
          description: Discussion feed retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion feed retrieved successfully"
                  data:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 50
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/DiscussionFeedItem"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/overview:
    get:
      tags:
        - Discussion
      summary: Get discussion statistics
      description: Get discussion statistics including total discussions and replies
      parameters:
        - name: withToday
          in: query
          schema:
            type: boolean
            default: false
          description: Include today's statistics
          example: false
      responses:
        "200":
          description: Discussion statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Discussion stats fetched succesfully"
                  data:
                    type: object
                    properties:
                      totalDiscussions:
                        type: integer
                        example: 150
                      totalReplies:
                        type: integer
                        example: 450
                      today:
                        type: object
                        properties:
                          discussions:
                            type: integer
                            example: 5
                          replies:
                            type: integer
                            example: 12
                        description: Only included if withToday=true
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/trending:
    get:
      tags:
        - Discussion
      summary: Get trending topics
      description: Get trending discussion topics
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 5
          description: Number of trending topics to return
          example: 5
        - name: category
          in: query
          schema:
            type: string
          description: Filter by category
          example: "Teaching Tips & Strategies"
        - name: tag
          in: query
          schema:
            type: string
          description: Filter by tag
          example: "online-teaching"
      responses:
        "200":
          description: Trending topics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Trending Topics fetched succesfully"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/TrendingTopic"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/{id}/related:
    get:
      tags:
        - Discussion
      summary: Get related discussions
      description: Get discussions related to the specified discussion by category
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Related discussions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Related discussions fetched!"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Discussion"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/categories/stats:
    get:
      tags:
        - Discussion
      summary: Get category statistics
      description: Get statistics for each discussion category including posts and unique members
      responses:
        "200":
          description: Category statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Category stats fetched successfully"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CategoryStats"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/discussion/community/overview:
    get:
      tags:
        - Discussion
      summary: Get community overview
      description: Get community overview with members, discussions, and replies statistics
      responses:
        "200":
          description: Community overview retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Community overview fetched successfully"
                  data:
                    $ref: "#/components/schemas/CommunityOverview"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/reply/add-reply:
    post:
      tags:
        - Reply
      summary: Add a reply to a discussion
      description: Add a reply to a discussion or create a nested reply
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - discussionId
                - content
              properties:
                discussionId:
                  type: string
                  description: ID of the discussion to reply to
                  example: "64a1b2c3d4e5f6789abcdef0"
                content:
                  type: string
                  description: Reply content
                  example: "Great point! I've found that interactive activities work really well..."
                parentReply:
                  type: string
                  description: ID of parent reply for nested replies (optional)
                  example: "64a1b2c3d4e5f6789abcdef1"
      responses:
        "201":
          description: Reply posted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Reply posted successfully"
                  data:
                    $ref: "#/components/schemas/Reply"
        "400":
          description: Bad request - missing required fields or invalid parent reply
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden - discussion is locked
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Discussion not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/reply/get-replies/{discussionId}:
    get:
      tags:
        - Reply
      summary: Get replies for a discussion
      description: Get all replies for a specific discussion with pagination
      parameters:
        - name: discussionId
          in: path
          required: true
          schema:
            type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number for pagination
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of replies per page
          example: 10
      responses:
        "200":
          description: Replies retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Replies fetched succesfully"
                  data:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      total:
                        type: integer
                        example: 25
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/Reply"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /v1/reply/toggle-like/{id}:
    patch:
      tags:
        - Reply
      summary: Like or unlike a reply
      description: Toggle like status for a reply
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Reply ID
          example: "64a1b2c3d4e5f6789abcdef0"
      responses:
        "200":
          description: Like status updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Like status updated!"
                  data:
                    type: object
                    properties:
                      replyId:
                        type: string
                        example: "64a1b2c3d4e5f6789abcdef0"
                      likeCount:
                        type: integer
                        example: 8
                      liked:
                        type: boolean
                        example: true
        "401":
          description: Unauthorized - invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Reply not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    User:
      type: object
      properties:
        _id:
          type: string
          description: Unique user identifier
          example: "64a1b2c3d4e5f6789abcdef0"
        email:
          type: string
          format: email
          description: User's email address
          example: "user@example.com"
        firstName:
          type: string
          description: User's first name
          example: "John"
        lastName:
          type: string
          description: User's last name
          example: "Doe"
        role:
          type: string
          enum: [teacher, school, admin]
          description: User's role
          example: "teacher"
        isEmailVerified:
          type: boolean
          description: Whether the user's email is verified
          example: true
        status:
          type: string
          enum: [active, inactive, suspended]
          description: User's account status
          example: "active"
        profileCompleted:
          type: boolean
          description: Whether the user has completed their profile
          example: true
        createdAt:
          type: string
          format: date-time
          description: Account creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp

    Resource:
      type: object
      properties:
        _id:
          type: string
          description: Unique resource identifier
          example: "64a1b2c3d4e5f6789abcdef0"
        title:
          type: string
          description: Resource title
          example: "Advanced Mathematics Worksheets"
        description:
          type: string
          description: Resource description
          example: "Comprehensive worksheets covering algebra, geometry, and calculus"
        type:
          type: string
          enum:
            [worksheet, lesson_plan, assessment, activity, presentation, other]
          description: Type of resource
          example: "worksheet"
        isFree:
          type: boolean
          description: Whether the resource is free
          example: true
        price:
          type: number
          description: Resource price (0 if free)
          example: 0
        currency:
          type: string
          nullable: true
          description: Currency code
          example: "USD"
        publishing:
          type: string
          enum: [public, private]
          description: Visibility setting
          example: "public"
        status:
          type: string
          enum: [draft, pending, approved, rejected]
          description: Approval status
          example: "approved"
        ageRange:
          type: string
          description: Target age range
          example: "6-8 years"
        curriculum:
          type: string
          description: Curriculum framework
          example: "Common Core"
        curriculumType:
          type: string
          description: Type of curriculum
          example: "Mathematics"
        subject:
          type: string
          description: Subject area
          example: "Mathematics"
        createdBy:
          $ref: "#/components/schemas/CreatedBy"
        coverPhoto:
          $ref: "#/components/schemas/ResourceFile"
        previewImages:
          type: array
          items:
            $ref: "#/components/schemas/ResourceFile"
          description: Preview images
        mainFile:
          $ref: "#/components/schemas/ResourceFile"
        approvedBy:
          type: string
          nullable: true
          description: ID of user who approved the resource
        isDeleted:
          type: boolean
          description: Soft delete flag
          example: false
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp

    FormattedResource:
      type: object
      properties:
        id:
          type: string
          description: Resource ID
          example: "64a1b2c3d4e5f6789abcdef0"
        thumbnail:
          type: string
          nullable: true
          description: Cover photo URL
          example: "https://res.cloudinary.com/example/image/upload/v1234567890/cover.jpg"
        title:
          type: string
          description: Resource title
          example: "Advanced Mathematics Worksheets"
        author:
          type: string
          description: Author name
          example: "John Doe"
        price:
          type: string
          description: Formatted price
          example: "Free"
        status:
          type: string
          description: Resource status
          example: "approved"
        flags:
          type: integer
          description: Number of flags (placeholder)
          example: 0
        uploadDate:
          type: string
          format: date-time
          description: Upload date
          example: "2023-07-01T10:30:00Z"

    DetailedResource:
      type: object
      properties:
        id:
          type: string
          description: Resource ID
          example: "64a1b2c3d4e5f6789abcdef0"
        title:
          type: string
          description: Resource title
          example: "Advanced Mathematics Worksheets"
        description:
          type: string
          description: Resource description
          example: "Comprehensive worksheets covering algebra, geometry, and calculus"
        subject:
          type: string
          description: Subject area
          example: "Mathematics"
        age:
          type: string
          description: Age range
          example: "6-8 years"
        curriculum:
          type: string
          description: Curriculum framework
          example: "Common Core"
        price:
          type: string
          description: Formatted price
          example: "Free"
        status:
          type: string
          description: Resource status
          example: "approved"
        thumbnail:
          type: string
          nullable: true
          description: Cover photo URL
          example: "https://res.cloudinary.com/example/image/upload/v1234567890/cover.jpg"
        author:
          type: string
          description: Author name
          example: "John Doe"
        files:
          type: array
          items:
            $ref: "#/components/schemas/ResourceFile"
          description: Resource files
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp

    ResourceFile:
      type: object
      properties:
        _id:
          type: string
          description: File ID
          example: "64a1b2c3d4e5f6789abcdef1"
        resourceId:
          type: string
          description: Associated resource ID
          example: "64a1b2c3d4e5f6789abcdef0"
        fileType:
          type: string
          enum: [cover, preview, main]
          description: Type of file
          example: "cover"
        url:
          type: string
          description: File URL
          example: "https://res.cloudinary.com/example/image/upload/v1234567890/file.pdf"
        publicId:
          type: string
          description: Cloudinary public ID
          example: "educate-hub/resources/64a1b2c3d4e5f6789abcdef0/cover"
        format:
          type: string
          description: File format
          example: "pdf"
        size:
          type: integer
          description: File size in bytes
          example: 1024000
        uploadedBy:
          type: string
          description: User ID who uploaded the file
          example: "64a1b2c3d4e5f6789abcdef2"

    CreatedBy:
      type: object
      properties:
        userId:
          type: string
          description: User ID
          example: "64a1b2c3d4e5f6789abcdef2"
        role:
          type: string
          enum: [teacher, school, admin]
          description: User role
          example: "teacher"

    ResourceStats:
      type: object
      properties:
        totalResources:
          type: integer
          description: Total number of resources created by user
          example: 15
        totalSales:
          type: integer
          description: Total number of sales
          example: 45
        currentBalance:
          type: number
          description: Current wallet balance
          example: 125.50

    Pagination:
      type: object
      properties:
        total:
          type: integer
          description: Total number of items
          example: 100
        page:
          type: integer
          description: Current page number
          example: 1
        pages:
          type: integer
          description: Total number of pages
          example: 10

    AdminDashboardStats:
      type: object
      properties:
        totalUsers:
          type: integer
          description: Total number of users on the platform
          example: 1250
        activeJobs:
          type: integer
          description: Number of currently active/published jobs
          example: 45
        forumPosts:
          type: integer
          description: Total number of forum posts
          example: 148
        platformRevenue:
          type: number
          description: Total platform revenue
          example: 43222

    RecentActivity:
      type: object
      properties:
        type:
          type: string
          enum: [school, job]
          description: Type of activity
          example: "school"
        name:
          type: string
          description: Name of the school or job title
          example: "Springfield Elementary School"
        createdAt:
          type: string
          format: date-time
          description: When the activity occurred
          example: "2023-07-01T10:30:00Z"

    AdminResourceStats:
      type: object
      properties:
        totalResources:
          type: integer
          description: Total number of resources on the platform
          example: 250
        pendingApprovals:
          type: integer
          description: Number of resources pending approval
          example: 12
        flaggedResources:
          type: integer
          description: Number of flagged resources
          example: 0
        totalSales:
          type: number
          description: Total sales revenue from resources
          example: 15420.50

    ForumStats:
      type: object
      properties:
        totalDiscussions:
          type: integer
          description: Total number of discussions
          example: 150
        active:
          type: integer
          description: Number of active discussions
          example: 142
        reported:
          type: integer
          description: Number of reported discussions
          example: 3
        pinned:
          type: integer
          description: Number of pinned discussions
          example: 5
        totalReplies:
          type: integer
          description: Total number of replies
          example: 450

    Discussion:
      type: object
      properties:
        _id:
          type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
        title:
          type: string
          description: Discussion title
          example: "Best practices for online teaching"
        content:
          type: string
          description: Discussion content
          example: "I would like to share some effective strategies for engaging students in online classes..."
        category:
          type: string
          enum:
            - "Teaching Tips & Strategies"
            - "Curriculum & Resources"
            - "Career Advice"
            - "Help & Support"
          description: Discussion category
          example: "Teaching Tips & Strategies"
        tags:
          type: array
          items:
            type: string
          description: Discussion tags
          example: ["online-teaching", "engagement", "strategies"]
        createdBy:
          $ref: "#/components/schemas/DiscussionAuthor"
        likes:
          type: array
          items:
            type: string
          description: Array of user IDs who liked the discussion
          example: ["64a1b2c3d4e5f6789abcdef1", "64a1b2c3d4e5f6789abcdef2"]
        views:
          type: integer
          description: Number of views
          example: 25
        isActive:
          type: boolean
          description: Whether the discussion is active
          example: true
        isPinned:
          type: boolean
          description: Whether the discussion is pinned
          example: false
        isLocked:
          type: boolean
          description: Whether the discussion is locked
          example: false
        reports:
          type: array
          items:
            $ref: "#/components/schemas/DiscussionReport"
          description: Reports made against the discussion
        replyCount:
          type: integer
          description: Number of replies
          example: 8
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2023-07-01T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2023-07-01T10:30:00Z"

    DiscussionAuthor:
      type: object
      properties:
        _id:
          type: string
          description: User ID
          example: "64a1b2c3d4e5f6789abcdef1"
        firstName:
          type: string
          description: User's first name
          example: "John"
        lastName:
          type: string
          description: User's last name
          example: "Doe"
        avatarUrl:
          type: string
          nullable: true
          description: User's avatar URL
          example: "https://res.cloudinary.com/example/image/upload/v1234567890/avatar.jpg"

    DiscussionReport:
      type: object
      properties:
        userId:
          type: string
          description: User ID who made the report
          example: "64a1b2c3d4e5f6789abcdef2"
        reason:
          type: string
          description: Reason for the report
          example: "Inappropriate content"
        createdAt:
          type: string
          format: date-time
          description: Report timestamp
          example: "2023-07-01T10:30:00Z"

    Reply:
      type: object
      properties:
        _id:
          type: string
          description: Reply ID
          example: "64a1b2c3d4e5f6789abcdef0"
        discussion:
          type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef1"
        content:
          type: string
          description: Reply content
          example: "Great point! I've found that interactive activities work really well..."
        parentReply:
          oneOf:
            - type: string
              description: Parent reply ID for nested replies
              example: "64a1b2c3d4e5f6789abcdef2"
            - type: object
              nullable: true
              description: Populated parent reply object
              properties:
                content:
                  type: string
                  example: "Original reply content"
                createdBy:
                  $ref: "#/components/schemas/DiscussionAuthor"
        createdBy:
          $ref: "#/components/schemas/DiscussionAuthor"
        likes:
          type: array
          items:
            type: string
          description: Array of user IDs who liked the reply
          example: ["64a1b2c3d4e5f6789abcdef3", "64a1b2c3d4e5f6789abcdef4"]
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2023-07-01T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2023-07-01T10:30:00Z"

    DiscussionStats:
      type: object
      properties:
        totalDiscussions:
          type: integer
          description: Total number of discussions
          example: 150
        totalReplies:
          type: integer
          description: Total number of replies
          example: 450
        todayDiscussions:
          type: integer
          description: Discussions created today (if withToday=true)
          example: 5
        todayReplies:
          type: integer
          description: Replies created today (if withToday=true)
          example: 12

    TrendingTopic:
      type: object
      properties:
        _id:
          type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
        title:
          type: string
          description: Discussion title
          example: "Best practices for online teaching"
        category:
          type: string
          description: Discussion category
          example: "Teaching Tips & Strategies"
        tags:
          type: array
          items:
            type: string
          description: Discussion tags
          example: ["online-teaching", "engagement"]
        views:
          type: integer
          description: Number of views
          example: 25
        replyCount:
          type: integer
          description: Number of replies
          example: 8
        trendingScore:
          type: number
          description: Calculated trending score
          example: 12.5
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2023-07-01T10:30:00Z"

    DiscussionFeedItem:
      type: object
      properties:
        _id:
          type: string
          description: Discussion ID
          example: "64a1b2c3d4e5f6789abcdef0"
        title:
          type: string
          description: Discussion title
          example: "Best practices for online teaching"
        content:
          type: string
          description: Discussion content
          example: "I would like to share some effective strategies..."
        category:
          type: string
          description: Discussion category
          example: "Teaching Tips & Strategies"
        tags:
          type: array
          items:
            type: string
          description: Discussion tags
          example: ["online-teaching", "engagement"]
        createdBy:
          type: string
          description: User ID who created the discussion
          example: "64a1b2c3d4e5f6789abcdef1"
        views:
          type: integer
          description: Number of views
          example: 25
        replyCount:
          type: integer
          description: Number of replies
          example: 8
        lastReplyAt:
          type: string
          format: date-time
          description: Timestamp of last reply
          example: "2023-07-01T10:30:00Z"
        trendingScore:
          type: number
          description: Calculated trending score
          example: 12.5
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
          example: "2023-07-01T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2023-07-01T10:30:00Z"
        user:
          type: object
          properties:
            firstName:
              type: string
              example: "John"
            lastName:
              type: string
              example: "Doe"
            avatarUrl:
              type: string
              nullable: true
              example: "https://res.cloudinary.com/example/image/upload/v1234567890/avatar.jpg"

    CategoryStats:
      type: object
      properties:
        category:
          type: string
          description: Category name
          example: "Teaching Tips & Strategies"
        posts:
          type: integer
          description: Number of posts in this category
          example: 45
        members:
          type: integer
          description: Number of unique members who participated in this category
          example: 32

    CommunityOverview:
      type: object
      properties:
        activeMembers:
          type: integer
          description: Number of unique members who participated
          example: 85
        totalDiscussions:
          type: integer
          description: Total number of discussions
          example: 150
        totalReplies:
          type: integer
          description: Total number of replies
          example: 450

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          description: Error message
          example: "Resource not found"
        error:
          type: string
          description: Detailed error information
          example: "Validation failed"
