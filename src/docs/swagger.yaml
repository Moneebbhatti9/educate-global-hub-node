openapi: 3.0.0
info:
  title: Educate Global Hub API
  version: 1.0.0
  description: A comprehensive API for the Educate Global Hub platform
  contact:
    name: API Support
    email: support@educateglobalhub.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
  - url: http://localhost:5000
    description: Development server
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: 'Enter your JWT token in the format: Bearer <token>'
  schemas:
    User:
      type: object
      properties:
        _id:
          type: string
          example: 507f1f77bcf86cd799439011
          description: User ID
        firstName:
          type: string
          example: John
          description: User's first name
        lastName:
          type: string
          example: Doe
          description: User's last name
        email:
          type: string
          format: email
          example: john.doe@example.com
          description: User's email address
        role:
          type: string
          enum:
            - teacher
            - school
            - admin
            - supplier
            - recruiter
          example: teacher
          description: User's role
        status:
          type: string
          enum:
            - active
            - inactive
            - suspended
            - pending
          example: active
          description: User's account status
        isEmailVerified:
          type: boolean
          example: false
          description: Whether email is verified
        isProfileComplete:
          type: boolean
          example: false
          description: Whether profile is complete
        avatarUrl:
          type: string
          example: https://example.com/avatar.jpg
          description: User's avatar URL
        lastLogin:
          type: string
          format: date-time
          description: Last login timestamp
        isAdminVerified:
          type: boolean
          example: false
          description: Whether admin has approved the account
        createdAt:
          type: string
          format: date-time
          description: Account creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
    Teacher:
      type: object
      properties:
        _id:
          type: string
          example: 507f1f77bcf86cd799439012
        userId:
          type: string
          example: 507f1f77bcf86cd799439011
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Doe
        phoneNumber:
          type: string
          example: '+1234567890'
        country:
          type: string
          example: United States
        city:
          type: string
          example: New York
        provinceState:
          type: string
          example: NY
        zipCode:
          type: string
          example: '10001'
        address:
          type: string
          example: 123 Main St
        qualification:
          type: string
          enum:
            - Bachelor
            - Master
            - PhD
            - Diploma
            - Certificate
            - Other
          example: Master
        teachingSubjects:
          type: array
          items:
            type: string
          example:
            - Mathematics
            - Physics
        yearsOfExperience:
          type: number
          example: 5
        pgce:
          type: boolean
          example: true
        professionalBio:
          type: string
          example: Experienced mathematics teacher with 5 years of teaching experience...
        keyAchievements:
          type: array
          items:
            type: string
          example:
            - Teacher of the Year 2022
            - Published 3 research papers
        certifications:
          type: array
          items:
            type: string
          example:
            - PGCE
            - TEFL Certificate
    School:
      type: object
      properties:
        _id:
          type: string
          example: 507f1f77bcf86cd799439013
        userId:
          type: string
          example: 507f1f77bcf86cd799439011
        schoolName:
          type: string
          example: Example International School
        schoolEmail:
          type: string
          format: email
          example: info@exampleinternational.edu
        schoolContactNumber:
          type: string
          example: '+1234567890'
        country:
          type: string
          example: United States
        city:
          type: string
          example: New York
        provinceState:
          type: string
          example: NY
        zipCode:
          type: string
          example: '10001'
        curriculum:
          type: array
          items:
            type: string
          example:
            - British Curriculum
            - American Curriculum
        schoolSize:
          type: string
          enum:
            - Small (1-100 students)
            - Medium (101-500 students)
            - Large (501-1000 students)
            - Very Large (1000+ students)
          example: Medium (101-500 students)
        schoolType:
          type: string
          enum:
            - Public
            - Private
            - International
            - Charter
            - Religious
          example: International
        genderType:
          type: string
          enum:
            - Co-educational
            - Boys only
            - Girls only
          example: Co-educational
        ageGroups:
          type: array
          items:
            type: string
          example:
            - Primary (3-11 years)
            - Secondary (11-18 years)
        website:
          type: string
          format: uri
          example: https://exampleinternational.edu
        aboutSchool:
          type: string
          example: Example International School is a leading educational institution...
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Error message
        errors:
          type: array
          items:
            type: string
          example:
            - Field is required
    Success:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Operation successful
        data:
          type: object
        meta:
          type: object
    RegisterRequest:
      type: object
      required:
        - firstName
        - lastName
        - email
        - password
        - role
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's first name
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's last name
        email:
          type: string
          format: email
          description: User's email address
        password:
          type: string
          minLength: 8
          description: User's password (must contain uppercase, lowercase, number, and special character)
        role:
          type: string
          enum:
            - teacher
            - school
            - admin
            - supplier
            - recruiter
          description: User's role
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: User's email address
        password:
          type: string
          description: User's password
    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Login successful
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            tokens:
              type: object
              properties:
                accessToken:
                  type: string
                  description: JWT access token
                refreshToken:
                  type: string
                  description: JWT refresh token
                expiresIn:
                  type: number
                  description: Access token expiry time in milliseconds
    OtpRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          description: User's email address
    VerifyOtpRequest:
      type: object
      required:
        - email
        - otp
      properties:
        email:
          type: string
          format: email
          description: User's email address
        otp:
          type: string
          pattern: ^[0-9]{6}$
          description: 6-digit OTP code
    ResetPasswordRequest:
      type: object
      required:
        - email
        - otp
        - newPassword
      properties:
        email:
          type: string
          format: email
          description: User's email address
        otp:
          type: string
          pattern: ^[0-9]{6}$
          description: 6-digit OTP code
        newPassword:
          type: string
          minLength: 8
          description: New password (must contain uppercase, lowercase, number, and special character)
    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: JWT refresh token
    ChangePasswordRequest:
      type: object
      required:
        - currentPassword
        - newPassword
      properties:
        currentPassword:
          type: string
          description: Current password
        newPassword:
          type: string
          minLength: 8
          description: New password (must contain uppercase, lowercase, number, and special character)
    UpdateProfileRequest:
      type: object
      properties:
        firstName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's first name
        lastName:
          type: string
          minLength: 2
          maxLength: 50
          description: User's last name
        avatarUrl:
          type: string
          format: uri
          description: User's avatar URL
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Whether the request was successful
        message:
          type: string
          description: Response message
        data:
          type: object
          description: Response data
        timestamp:
          type: string
          format: date-time
          description: Response timestamp
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          description: Error message
        errors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
                description: Field name with error
              message:
                type: string
                description: Error message for the field
        timestamp:
          type: string
          format: date-time
          description: Response timestamp
tags:
  - name: Authentication
    description: User authentication and authorization endpoints
  - name: Users
    description: User management operations
  - name: Teachers
    description: Teacher profile management
  - name: Schools
    description: School profile management
paths:
  /api/v1/auth/register:
    post:
      summary: Register a new user
      description: Create a new user account with email verification
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: User already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/login:
    post:
      summary: Login user
      description: Authenticate user and return access tokens
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Account not verified or approved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/send-otp:
    post:
      summary: Send OTP for email verification
      description: Send a 6-digit OTP to user's email for verification
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OtpRequest'
      responses:
        '200':
          description: OTP sent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Email already verified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/verify-otp:
    post:
      summary: Verify OTP for email verification
      description: Verify the 6-digit OTP sent to user's email
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyOtpRequest'
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error or invalid OTP
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Email already verified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/resend-otp:
    post:
      summary: Resend OTP for email verification
      description: Resend a new 6-digit OTP to user's email
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OtpRequest'
      responses:
        '200':
          description: OTP resent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Email already verified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/forgot-password:
    post:
      summary: Send OTP for password reset
      description: Send a 6-digit OTP to user's email for password reset
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OtpRequest'
      responses:
        '200':
          description: Password reset OTP sent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/reset-password:
    post:
      summary: Reset password with OTP
      description: Reset user password using the OTP sent to email
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error or invalid OTP
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/refresh:
    post:
      summary: Refresh access token
      description: Get a new access token using refresh token
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Invalid or expired refresh token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/logout:
    post:
      summary: Logout user
      description: Invalidate refresh token and logout user
      tags:
        - Authentication
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Logged out successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/current-user:
    get:
      summary: Get current user
      description: Get current authenticated user's information
      tags:
        - Authentication
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Current user retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/profile:
    put:
      summary: Update user profile
      description: Update current user's profile information
      tags:
        - Authentication
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/v1/auth/change-password:
    put:
      summary: Change user password
      description: Change current user's password
      tags:
        - Authentication
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
      responses:
        '200':
          description: Password changed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Validation error or incorrect current password
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
